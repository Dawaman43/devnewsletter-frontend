---
import Quotes from "../../data/quotes.json";

function getDailyQuote() {
  const quotes = Quotes;
  if (!Array.isArray(quotes) || quotes.length === 0) return null;

  const today = new Date();
  const dateString = today.toISOString().slice(0, 10); 
  
  let hash = 0;
  for (let i = 0; i < dateString.length; i++) {
    hash = (hash << 5) - hash + dateString.charCodeAt(i);
    hash = hash & hash;
  }
  
  const index = Math.abs(hash) % quotes.length;
  return quotes[index];
}

const dailyQuote = getDailyQuote();
---

<section class="my-24 max-w-4xl mx-auto px-6">
  <div class="relative bg-gradient-to-br from-amber-50/70 to-orange-50/50 rounded-3xl px-10 py-14 overflow-hidden">
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-4 left-8 w-32 h-32 bg-amber-600 rounded-full blur-3xl"></div>
      <div class="absolute bottom-6 right-12 w-40 h-40 bg-orange-500 rounded-full blur-3xl"></div>
    </div>

    <div class="relative text-center">
      {dailyQuote ? (
        <>
          <!-- Quote mark -->
          <div class="text-7xl font-serif text-amber-700/40 select-none leading-none mb-6">
            “
          </div>

          <!-- Quote text -->
          <blockquote class="text-2xl md:text-3xl font-serif italic text-gray-800 leading-relaxed max-w-3xl mx-auto">
            {typeof dailyQuote === "string" ? dailyQuote : dailyQuote.text}
          </blockquote>

          <!-- Author (if exists) -->
          {typeof dailyQuote !== "string" && dailyQuote.author && (
            <p class="mt-8 text-lg text-gray-600 font-medium">
              — {dailyQuote.author}
            </p>
          )}
        </>
      ) : (
        <p class="text-gray-500">No quotes available.</p>
      )}
    </div>
  </div>

  <p class="text-center text-sm text-gray-500 mt-6">
    A new thought every day
  </p>
</section>