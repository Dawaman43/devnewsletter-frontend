import { f as createComponent, k as renderComponent, r as renderTemplate, m as maybeRenderHead, h as addAttribute } from '../chunks/astro/server_DXpmQ0xB.mjs';
import { $ as $$Layout } from '../chunks/Layout_Cauy4deL.mjs';
/* empty css                                 */
export { renderers } from '../renderers.mjs';

const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const API_BASE = "http://localhost:3000";
  let posts = [];
  let topPosts = [];
  let adminPicks = [];
  let categories = [];
  try {
    const [postsRes, topRes, adminRes, catsRes] = await Promise.all([
      fetch(`${API_BASE}/api/posts?limit=6`),
      fetch(`${API_BASE}/api/posts/top?limit=4`),
      fetch(`${API_BASE}/api/posts/admin-picks?limit=4`),
      fetch(`${API_BASE}/api/categories`)
    ]);
    const postsData = await postsRes.json();
    const topData = await topRes.json();
    const adminData = await adminRes.json();
    posts = postsData.posts;
    topPosts = topData.posts || [];
    adminPicks = adminData.posts || [];
    categories = await catsRes.json();
  } catch (err) {
    console.error("Failed to load data:", err);
  }
  const formatExcerpt = (content) => {
    const text = content.replace(/!\[.*?\]\(.*?\)/g, "").replace(/[#*`]/g, "").replace(/\n+/g, " ").trim();
    return text.length > 0 ? text.substring(0, 150) + "..." : "";
  };
  const extractImage = (content) => {
    const match = content.match(/!\[.*?\]\((.*?)\)/);
    return match ? match[1] : null;
  };
  return renderTemplate`${renderComponent($$result, "Layout", $$Layout, { "title": "DevNewsletter - Stay Updated with Developer News", "showHero": true, "data-astro-cid-j7pv25f6": true }, { "default": async ($$result2) => renderTemplate`  ${topPosts.length > 0 && renderTemplate`${maybeRenderHead()}<section class="top-stories-section py-20 bg-amber-50/20 dark:bg-amber-900/5" data-astro-cid-j7pv25f6> <div class="container" data-astro-cid-j7pv25f6> <div class="flex items-center gap-4 mb-12" data-astro-cid-j7pv25f6> <div class="w-12 h-12 flex items-center justify-center bg-amber-500 text-white rounded-2xl shadow-lg shadow-amber-500/20" data-astro-cid-j7pv25f6> <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" data-astro-cid-j7pv25f6><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" data-astro-cid-j7pv25f6></path></svg> </div> <div data-astro-cid-j7pv25f6> <h2 class="text-3xl md:text-4xl font-serif font-black leading-tight tracking-tight" data-astro-cid-j7pv25f6>Top Stories</h2> <p class="text-gray-500 dark:text-zinc-500 text-sm font-bold uppercase tracking-[0.2em] mt-1" data-astro-cid-j7pv25f6>Most Read This Week</p> </div> </div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" data-astro-cid-j7pv25f6> ${topPosts.map((post) => renderTemplate`<a${addAttribute(`/posts/${post.id}`, "href")} class="group relative block aspect-[3/4] overflow-hidden rounded-3xl bg-gray-900 shadow-xl transition-all hover:-translate-y-2" data-astro-cid-j7pv25f6> <img${addAttribute(extractImage(post.content) || "/og-image.jpg", "src")}${addAttribute(post.title, "alt")} class="absolute inset-0 h-full w-full object-cover opacity-60 transition-transform duration-700 group-hover:scale-110 group-hover:rotate-2" data-astro-cid-j7pv25f6> <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent" data-astro-cid-j7pv25f6></div> <div class="absolute inset-0 p-6 flex flex-col justify-end gap-3 text-white" data-astro-cid-j7pv25f6> <div class="flex items-center gap-2" data-astro-cid-j7pv25f6> <span class="px-2 py-0.5 bg-amber-500 text-[10px] font-bold uppercase tracking-widest rounded-md" data-astro-cid-j7pv25f6>Trending</span> <span class="text-[10px] text-gray-300 font-bold uppercase tracking-widest flex items-center gap-1" data-astro-cid-j7pv25f6> <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-astro-cid-j7pv25f6><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" data-astro-cid-j7pv25f6></path><path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" data-astro-cid-j7pv25f6></path></svg> ${post.views} </span> </div> <h3 class="text-xl font-serif font-bold group-hover:text-amber-400 transition-colors leading-snug" data-astro-cid-j7pv25f6>${post.title}</h3> </div> </a>`)} </div> </div> </section>`} ${categories.length > 0 && renderTemplate`<section class="categories-section" data-astro-cid-j7pv25f6> <div class="container" data-astro-cid-j7pv25f6> <h2 class="section-title" data-astro-cid-j7pv25f6>Browse by Category</h2> <div class="categories-grid" data-astro-cid-j7pv25f6> ${categories.map((cat) => renderTemplate`<a${addAttribute(`/categories/${cat.slug}`, "href")} class="category-card group" data-astro-cid-j7pv25f6> <span class="category-icon text-2xl group-hover:scale-125 transition-transform duration-300" data-astro-cid-j7pv25f6>üìÅ</span> <span class="category-name font-bold group-hover:text-amber-600 dark:group-hover:text-amber-500 transition-colors" data-astro-cid-j7pv25f6>${cat.name}</span> </a>`)} </div> </div> </section>`} ${adminPicks.length > 0 && renderTemplate`<section class="admin-picks-section py-20 border-b border-gray-100 dark:border-zinc-800/50" data-astro-cid-j7pv25f6> <div class="max-w-xl mx-auto mb-16 space-y-4 text-center" data-astro-cid-j7pv25f6> <h2 class="text-4xl md:text-5xl font-serif font-black leading-tight" data-astro-cid-j7pv25f6>Admin Picks</h2> <p class="text-gray-500 dark:text-zinc-400 font-serif italic text-lg leading-relaxed" data-astro-cid-j7pv25f6>Hand-curated insights and stories you might have missed.</p> <div class="h-1 w-20 bg-amber-500 mx-auto rounded-full" data-astro-cid-j7pv25f6></div> </div> <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto" data-astro-cid-j7pv25f6> ${adminPicks.map((post) => renderTemplate`<article class="relative flex flex-col sm:flex-row gap-6 p-6 bg-gray-50 dark:bg-zinc-900/50 rounded-3xl border border-gray-100 dark:border-zinc-800/50 hover:bg-white dark:hover:bg-zinc-900 transition-all duration-300 text-left" data-astro-cid-j7pv25f6> <div class="shrink-0 w-full sm:w-40 h-32 overflow-hidden rounded-2xl border border-gray-100 dark:border-zinc-800" data-astro-cid-j7pv25f6> <img${addAttribute(extractImage(post.content) || "/og-image.jpg", "src")}${addAttribute(post.title, "alt")} class="w-full h-full object-cover" data-astro-cid-j7pv25f6> </div> <div class="flex flex-col justify-center gap-3" data-astro-cid-j7pv25f6> <span class="text-[10px] font-bold text-amber-600 dark:text-amber-500 uppercase tracking-[0.2em]" data-astro-cid-j7pv25f6>Editor's Choice</span> <h3 class="text-xl font-serif font-bold leading-tight hover:text-amber-600 dark:hover:text-amber-500" data-astro-cid-j7pv25f6> <a${addAttribute(`/posts/${post.id}`, "href")} data-astro-cid-j7pv25f6>${post.title}</a> </h3> <a${addAttribute(`/posts/${post.id}`, "href")} class="text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-zinc-500 hover:text-amber-600 transition-colors" data-astro-cid-j7pv25f6>Read Post &rarr;</a> </div> </article>`)} </div> </section>`} <section class="posts-section" id="latest" data-astro-cid-j7pv25f6> <div class="container" data-astro-cid-j7pv25f6> <div class="section-header flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-16" data-astro-cid-j7pv25f6> <div data-astro-cid-j7pv25f6> <h2 class="text-4xl md:text-5xl font-serif font-black leading-tight" data-astro-cid-j7pv25f6>Latest Stories</h2> <p class="text-gray-500 dark:text-zinc-500 text-sm font-bold uppercase tracking-[0.2em] mt-2" data-astro-cid-j7pv25f6>The Freshly Brewed Notes</p> </div> <a href="/posts" class="view-all group flex items-center gap-3 px-8 py-3 bg-gray-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-black text-xs tracking-widest uppercase hover:scale-105 transition-all shadow-xl" data-astro-cid-j7pv25f6> <span data-astro-cid-j7pv25f6>Explore All</span> <span class="group-hover:translate-x-1 transition-transform" data-astro-cid-j7pv25f6>&rarr;</span> </a> </div> ${posts.length === 0 ? renderTemplate`<div class="empty-state" data-astro-cid-j7pv25f6> <p data-astro-cid-j7pv25f6>No posts yet. Check back soon!</p> </div>` : renderTemplate`<div class="posts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" data-astro-cid-j7pv25f6> ${posts.map((post) => renderTemplate`<article class="post-card group" data-astro-cid-j7pv25f6> <div class="post-card-content p-6 h-full flex flex-col" data-astro-cid-j7pv25f6> ${extractImage(post.content) && renderTemplate`<div class="post-image-container relative mb-8 aspect-[16/10] overflow-hidden rounded-2xl border border-gray-100 dark:border-zinc-800" data-astro-cid-j7pv25f6> <img${addAttribute(extractImage(post.content), "src")}${addAttribute(post.title, "alt")} class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" loading="lazy" data-astro-cid-j7pv25f6> <div class="absolute inset-0 bg-gradient-to-t from-gray-900/40 to-transparent" data-astro-cid-j7pv25f6></div> </div>`} <div class="flex items-center gap-3 mb-5" data-astro-cid-j7pv25f6> <time class="text-[10px] font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-widest" data-astro-cid-j7pv25f6> ${new Date(post.created_at).toLocaleDateString("en-US", {
    month: "short",
    day: "numeric",
    year: "numeric"
  })} </time> <span class="w-1 h-1 bg-amber-500/30 rounded-full" data-astro-cid-j7pv25f6></span> <span class="text-[10px] font-bold text-amber-600 dark:text-amber-500 uppercase tracking-widest" data-astro-cid-j7pv25f6>Fresh Drop</span> </div> <h3 class="post-title text-2xl font-serif font-bold mb-4 leading-tight group-hover:text-amber-600 dark:group-hover:text-amber-500 transition-colors" data-astro-cid-j7pv25f6> <a${addAttribute(`/posts/${post.id}`, "href")} data-astro-cid-j7pv25f6>${post.title}</a> </h3> <p class="post-excerpt text-gray-600 dark:text-zinc-400 font-serif leading-relaxed mb-10 line-clamp-3" data-astro-cid-j7pv25f6> ${formatExcerpt(post.content)} </p> <div class="mt-auto pt-6 border-t border-gray-100 dark:border-zinc-800/50" data-astro-cid-j7pv25f6> <a${addAttribute(`/posts/${post.id}`, "href")} class="read-more-btn inline-flex items-center gap-2 font-black text-[10px] text-gray-400 dark:text-zinc-500 tracking-widest uppercase hover:text-amber-600 dark:hover:text-amber-500 transition-all duration-300" data-astro-cid-j7pv25f6> <span data-astro-cid-j7pv25f6>Check it out</span> <span class="text-amber-500" data-astro-cid-j7pv25f6>&rarr;</span> </a> </div> </div> </article>`)} </div>`} </div> </section> ` })} `;
}, "/home/dave/Documents/devnewsletter/newsletter/src/pages/index.astro", void 0);
const $$file = "/home/dave/Documents/devnewsletter/newsletter/src/pages/index.astro";
const $$url = "";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Index,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
