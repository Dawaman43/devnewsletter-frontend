import { e as createAstro, f as createComponent, k as renderComponent, r as renderTemplate, l as defineScriptVars, m as maybeRenderHead } from '../../../../chunks/astro/server_DXpmQ0xB.mjs';
import { $ as $$AdminLayout } from '../../../../chunks/AdminLayout_BNdV-RCA.mjs';
/* empty css                                         */
export { renderers } from '../../../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro("https://devnews-nu.vercel.app");
const prerender = false;
const $$id = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$id;
  const API_BASE = "http://localhost:3000";
  const { id } = Astro2.params;
  return renderTemplate`${renderComponent($$result, "AdminLayout", $$AdminLayout, { "title": "Post Preview", "data-astro-cid-lfs2ldkw": true }, { "default": async ($$result2) => renderTemplate(_a || (_a = __template([" ", '<div class="max-w-4xl mx-auto" data-astro-cid-lfs2ldkw> <div class="mb-6 flex items-center justify-between" data-astro-cid-lfs2ldkw> <h1 class="text-3xl font-bold text-gray-900" data-astro-cid-lfs2ldkw>Post Preview</h1> <a href="/admin/posts" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300" data-astro-cid-lfs2ldkw>\nBack to Posts\n</a> </div> <div id="loadingState" class="text-gray-500" data-astro-cid-lfs2ldkw>Loading post...</div> <div id="previewContainer" class="hidden" data-astro-cid-lfs2ldkw> <!-- Post metadata --> <div class="bg-white rounded-lg shadow p-6 mb-6" data-astro-cid-lfs2ldkw> <div class="flex items-center justify-between mb-4" data-astro-cid-lfs2ldkw> <h2 id="postTitle" class="text-2xl font-bold text-gray-900" data-astro-cid-lfs2ldkw></h2> <span id="publishStatus" class="px-3 py-1 text-sm rounded" data-astro-cid-lfs2ldkw></span> </div> <div class="flex gap-4 text-sm text-gray-600" data-astro-cid-lfs2ldkw> <div data-astro-cid-lfs2ldkw>Created: <span id="createdAt" data-astro-cid-lfs2ldkw></span></div> <div data-astro-cid-lfs2ldkw>Updated: <span id="updatedAt" data-astro-cid-lfs2ldkw></span></div> </div> <div id="categoriesContainer" class="mt-4" data-astro-cid-lfs2ldkw></div> </div> <!-- Rendered content --> <div class="bg-white rounded-lg shadow p-8" data-astro-cid-lfs2ldkw> <article id="renderedContent" class="prose prose-lg max-w-none" data-astro-cid-lfs2ldkw></article> </div> </div> </div> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"> <script>(function(){', "\n    (async function(){\n      const getToken = () => {\n        try { const t = localStorage.getItem('token'); if (t) return t; } catch(e) {}\n        const m = document.cookie.match(/(?:^|; )token=([^;]+)/);\n        if (m) return decodeURIComponent(m[1]);\n        return null;\n      };\n\n      const token = getToken();\n      if (!token) return;\n\n      // Load marked and highlight.js\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      await loadScript('https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js');\n      await loadScript('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js');\n\n      try {\n        // Load post\n        const postRes = await fetch(`${API_BASE}/admin/posts`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        const posts = await postRes.json();\n        const post = posts.find(p => p.id === parseInt(id));\n\n        if (!post) {\n          document.getElementById('loadingState').textContent = 'Post not found';\n          return;\n        }\n\n        // Load categories\n        const catsRes = await fetch(`${API_BASE}/admin/posts/${id}/categories`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        const categories = await catsRes.json();\n\n        // Configure marked with syntax highlighting\n        marked.setOptions({\n          highlight: function(code, lang) {\n            if (lang && hljs.getLanguage(lang)) {\n              return hljs.highlight(code, { language: lang }).value;\n            }\n            return hljs.highlightAuto(code).value;\n          },\n          breaks: true,\n          gfm: true\n        });\n\n        // Render content\n        const html = marked.parse(post.content);\n        document.getElementById('renderedContent').innerHTML = html;\n\n        // Set metadata\n        document.getElementById('postTitle').textContent = post.title;\n        document.getElementById('createdAt').textContent = new Date(post.created_at).toLocaleString();\n        document.getElementById('updatedAt').textContent = new Date(post.updated_at).toLocaleString();\n\n        // Set publish status\n        const statusEl = document.getElementById('publishStatus');\n        if (post.published) {\n          statusEl.textContent = 'Published';\n          statusEl.className = 'px-3 py-1 text-sm rounded bg-green-100 text-green-800';\n        } else {\n          statusEl.textContent = 'Draft';\n          statusEl.className = 'px-3 py-1 text-sm rounded bg-gray-100 text-gray-800';\n        }\n\n        // Set categories\n        const catsContainer = document.getElementById('categoriesContainer');\n        if (categories.length > 0) {\n          catsContainer.innerHTML = '<div class=\"text-sm text-gray-600\">Categories: ' +\n            categories.map(cat => `<span class=\"inline-block px-2 py-1 bg-blue-100 text-blue-800 rounded mr-2\">${cat.name}</span>`).join('') +\n            '</div>';\n        }\n\n        document.getElementById('loadingState').classList.add('hidden');\n        document.getElementById('previewContainer').classList.remove('hidden');\n      } catch (err) {\n        console.error('Failed to load post', err);\n        document.getElementById('loadingState').textContent = 'Failed to load post';\n      }\n    })();\n  })();</script>  "], [" ", '<div class="max-w-4xl mx-auto" data-astro-cid-lfs2ldkw> <div class="mb-6 flex items-center justify-between" data-astro-cid-lfs2ldkw> <h1 class="text-3xl font-bold text-gray-900" data-astro-cid-lfs2ldkw>Post Preview</h1> <a href="/admin/posts" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300" data-astro-cid-lfs2ldkw>\nBack to Posts\n</a> </div> <div id="loadingState" class="text-gray-500" data-astro-cid-lfs2ldkw>Loading post...</div> <div id="previewContainer" class="hidden" data-astro-cid-lfs2ldkw> <!-- Post metadata --> <div class="bg-white rounded-lg shadow p-6 mb-6" data-astro-cid-lfs2ldkw> <div class="flex items-center justify-between mb-4" data-astro-cid-lfs2ldkw> <h2 id="postTitle" class="text-2xl font-bold text-gray-900" data-astro-cid-lfs2ldkw></h2> <span id="publishStatus" class="px-3 py-1 text-sm rounded" data-astro-cid-lfs2ldkw></span> </div> <div class="flex gap-4 text-sm text-gray-600" data-astro-cid-lfs2ldkw> <div data-astro-cid-lfs2ldkw>Created: <span id="createdAt" data-astro-cid-lfs2ldkw></span></div> <div data-astro-cid-lfs2ldkw>Updated: <span id="updatedAt" data-astro-cid-lfs2ldkw></span></div> </div> <div id="categoriesContainer" class="mt-4" data-astro-cid-lfs2ldkw></div> </div> <!-- Rendered content --> <div class="bg-white rounded-lg shadow p-8" data-astro-cid-lfs2ldkw> <article id="renderedContent" class="prose prose-lg max-w-none" data-astro-cid-lfs2ldkw></article> </div> </div> </div> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"> <script>(function(){', "\n    (async function(){\n      const getToken = () => {\n        try { const t = localStorage.getItem('token'); if (t) return t; } catch(e) {}\n        const m = document.cookie.match(/(?:^|; )token=([^;]+)/);\n        if (m) return decodeURIComponent(m[1]);\n        return null;\n      };\n\n      const token = getToken();\n      if (!token) return;\n\n      // Load marked and highlight.js\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      await loadScript('https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js');\n      await loadScript('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js');\n\n      try {\n        // Load post\n        const postRes = await fetch(\\`\\${API_BASE}/admin/posts\\`, {\n          headers: { Authorization: \\`Bearer \\${token}\\` }\n        });\n        const posts = await postRes.json();\n        const post = posts.find(p => p.id === parseInt(id));\n\n        if (!post) {\n          document.getElementById('loadingState').textContent = 'Post not found';\n          return;\n        }\n\n        // Load categories\n        const catsRes = await fetch(\\`\\${API_BASE}/admin/posts/\\${id}/categories\\`, {\n          headers: { Authorization: \\`Bearer \\${token}\\` }\n        });\n        const categories = await catsRes.json();\n\n        // Configure marked with syntax highlighting\n        marked.setOptions({\n          highlight: function(code, lang) {\n            if (lang && hljs.getLanguage(lang)) {\n              return hljs.highlight(code, { language: lang }).value;\n            }\n            return hljs.highlightAuto(code).value;\n          },\n          breaks: true,\n          gfm: true\n        });\n\n        // Render content\n        const html = marked.parse(post.content);\n        document.getElementById('renderedContent').innerHTML = html;\n\n        // Set metadata\n        document.getElementById('postTitle').textContent = post.title;\n        document.getElementById('createdAt').textContent = new Date(post.created_at).toLocaleString();\n        document.getElementById('updatedAt').textContent = new Date(post.updated_at).toLocaleString();\n\n        // Set publish status\n        const statusEl = document.getElementById('publishStatus');\n        if (post.published) {\n          statusEl.textContent = 'Published';\n          statusEl.className = 'px-3 py-1 text-sm rounded bg-green-100 text-green-800';\n        } else {\n          statusEl.textContent = 'Draft';\n          statusEl.className = 'px-3 py-1 text-sm rounded bg-gray-100 text-gray-800';\n        }\n\n        // Set categories\n        const catsContainer = document.getElementById('categoriesContainer');\n        if (categories.length > 0) {\n          catsContainer.innerHTML = '<div class=\"text-sm text-gray-600\">Categories: ' +\n            categories.map(cat => \\`<span class=\"inline-block px-2 py-1 bg-blue-100 text-blue-800 rounded mr-2\">\\${cat.name}</span>\\`).join('') +\n            '</div>';\n        }\n\n        document.getElementById('loadingState').classList.add('hidden');\n        document.getElementById('previewContainer').classList.remove('hidden');\n      } catch (err) {\n        console.error('Failed to load post', err);\n        document.getElementById('loadingState').textContent = 'Failed to load post';\n      }\n    })();\n  })();</script>  "])), maybeRenderHead(), defineScriptVars({ API_BASE, id })) })}`;
}, "/home/dave/Documents/devnewsletter/newsletter/src/pages/admin/posts/preview/[id].astro", void 0);
const $$file = "/home/dave/Documents/devnewsletter/newsletter/src/pages/admin/posts/preview/[id].astro";
const $$url = "/admin/posts/preview/[id]";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$id,
  file: $$file,
  prerender,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
